<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.member">
	<!-- 리절트 맵 정의 -->
	<resultMap id="memberResult" type="d001VO">
		<result property="member_id" column="member_id" />
		<result property="password" column="password" />
		<result property="name" column="name" />
		<result property="gender" column="gender" />
		<result property="birth" column="birth" />
		<result property="tel_no" column="tel_no" />
		<result property="nick_name" column="nick_name" />
		<result property="email" column="email" />
	</resultMap>

	<!-- 회원가입 ID 중복검사 -->
	<select id="selectOverlappedID" parameterType="String"
		resultType="String">
		select decode(count(*),1, 'true', 0, 'false')
		from b_member
		where member_id = #{id}
	</select>

	<!-- 회원가입 insert문 -->
	<insert id="insertNewMember" parameterType="d001VO">
	<![CDATA[
	insert into b_member(member_id, password, name, gender, birth,
	tel_no, nick_name, email)
	values(#{member_id,jdbcType=VARCHAR}, #{password,jdbcType=VARCHAR}, #{name,jdbcType=VARCHAR}, #{gender,jdbcType=VARCHAR}, #{birth,jdbcType=VARCHAR}
	, #{tel_no,jdbcType=VARCHAR}, #{nick_name,jdbcType=VARCHAR}, #{email,jdbcType=VARCHAR})
	]]>
	</insert>
	
	<!-- 로그인 쿼리문 -->
	<select id="login" resultType="d001VO" parameterType="java.util.Map"  >
	    <![CDATA[
			select*from b_member 
			 where member_id=#{member_id,jdbcType=VARCHAR}
			 and password=#{password,jdbcType=VARCHAR} 
		]]>
	</select>	

	<!-- 회원정보 조회 -->
	<select id="selectMember" resultMap="d001VO" parameterType="String">
		select * from b_member where member_id =#{memberId}
	</select>
	
	<!-- 회원정보 수정 -->
	<update id="updateMember" parameterType="d001VO">
		update b_memeber set
		name = #{name},password = #{password}, gender = #{gender}, birth =
		#{birth}, tel_no = #{tel_no}, nick_name = #{nick_name}, email = #{email}
		, 
		where memeber_id = #{memberId}
	
	</update>

	<!-- 프로필 가져오기 -->
		<!--select * from b_member where profile_image = #{profileImage}, potoAddr=#{potoAddr}-->
	<update id="updateProfile" parameterType="d001VO">
      update b_member
      set profile_image = #{profile_image},
         where member_id = #{member_id}
   </update>

	<!-- 회원 탈퇴 -->
	<delete id="deleteMember" parameterType="String">
		delete
		from b_member
		where member_id = #{memberId}
	</delete>
	
	
	
</mapper>